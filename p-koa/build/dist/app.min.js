"use strict";Object.defineProperty(exports,"__esModule",{value:!0});var Koa=require("koa"),koaStatic=require("koa-static"),koaViews=require("koa-views"),koaBodyParser=require("koa-bodyparser"),path=require("path"),session=require("koa-session-minimal"),MysqlStore=require("koa-mysql-session"),routers_1=require("./routers/routers"),mysql_1=require("./mysql/mysql"),db_config_1=require("./config/db.config"),app=new Koa;app.use(koaBodyParser()),app.use(koaStatic(path.join(__dirname,"../../build"))),app.use(koaViews(path.join(__dirname,"../../views"),{map:{html:"pug",pug:"pug"},extension:"pug"})),mysql_1.default.init(),app.keys=["koa mall"],app.use(session({key:"SESSION_ID",store:new MysqlStore({user:db_config_1.default.user,password:db_config_1.default.password,database:db_config_1.default.database,host:db_config_1.default.host}),cookie:{maxAge:864e5}})),app.use(routers_1.default.routes()).use(routers_1.default.allowedMethods()),app.listen(3e3);